#+LANGUAGE: ja
#+OPTIONS: toc:nil num:1

* management_servers (実験サーバー管理システム)

** 概要
- 大学の所属研究室における実験サーバーをwebで一元管理
- 学内ネットワークにて公開
  - システム，機能
    - 複数のサーバーから稼働データを定期取得
      - CPU使用率，メモリ使用量，ログイン状況 等
    - 取得データを利用した各サーバーのダッシュボードをwebで公開
    - web上で表示するデータをリアルタイムに近いタイミングで更新

      
** 開発背景
- 実情
  - 実験サーバーを研究室メンバーで共有しながら実験プログラムを回す
  - 数多くの実験サーバーを1~2名で管理


- 課題
  - 実験プログラム実行時における確認作業が手間
    - 確認のコミュニケーション
      - サーバー利用者はいないか？プログラムを実行して良いか？
    - サーバー状態の手動確認
      - コマンドを打って，値やデータを自分で確認する必要
  - 日常的な運用の手間，異常の早期発見が困難
   - わざわざログインし，手動で管理する必要


** 対応環境，利用条件
- 対応環境
  - ブラウザ：Google Chrome


- 利用条件
  - 学内ネットワークへの接続
  - 下部ローカル環境を参照し，ローカル環境下で動作確認をしてください


** 使用技術，言語
- webフロントエンド
  - HTML, CSS, JavaScript
- webバックエンド
  - PHP
- バッチ処理
  - Shell script (Zsh)
- 運用サーバー
  - OS
    - Ubuntu
  - webサーバーアプリケーション
    - Apache HTTP Server


** 実画面
- メインページ
  [[file:./main.gif]]


- 閲覧ページ
  [[file:./server.gif]]


** ローカル環境
- 自分はphp実行環境における組み込みサーバーを使用


- ローカルで動作させる方法
  - webディレクトリ内でローカルサーバーを起動
  - ブラウザからアクセスする


** 機能一覧
- 実験サーバーにおける稼働データ取得の自動化
  - 親機にてCronで以下の処理を毎分実行
    - 親機から各サーバーへsshログイン，その後データ取得プログラム実行
    - 作成したデータファイル(json)を親機へ転送
- リアルタイムに近いweb上のデータ更新
  - web上で表示するデータを上記処理のタイミングに合わせて更新
  - web側の独立した処理(javascript)でデータ更新のタイミングを合わせる
- CPU使用率の可視化
  - サーバー選択表においてCPU使用率に応じて色を変更し，視認性を向上


** システム図
[[file:./system.png]]


** 今後について
- この開発は現在も改善中であり，以下の取り組みを行う予定
  - 画面UI，ページレイアウトの改善
    - モダンな技術の使用やデザインの改善を検討
  - データ取得処理の見直し
    - 現在は，データを手動でjson形式に変形し，ファイルへ書き込みしている．
    - 安全かつ効率良い方法で行えないか検討中
  - その他，改善案
